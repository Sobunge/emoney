<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
  xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <link th:href="@{/webjars/bootstrap/5.3.0/css/bootstrap.min.css}" rel="stylesheet">
</head>

<body>

  <a th:href="@{/logout}">logout</a>

  <h6 th:text="${activeUser.firstName + ' ' + activeUser.secondName + ' ' + activeUser.thirdName}"> Welcome </h6>

  <h3> Users </h3>

  <a th:href="@{/users/register}">Add User</a>

  <div class="alert alert-danger" th:if="${fail}" th:text="${fail}">User exists</div>
  <div class="alert alert-success" th:if="${success}" th:text="${success}">User saved</div>

  <table class="table">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Name</th>
        <th scope="col">Id Number</th>
        <th scope="col">Phone Number</th>
        <th scope="col">Role</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="user : ${users}">
        <th scope="row">1</th>
        <td th:text="${user.firstName + ' ' + user.secondName + ' ' + user.thirdName}">Samuel Odhiambo Obunge</td>
        <td th:text="${user.idNumber}">32906735</td>
        <td th:text="${user.phoneNumber}">0707335375</td>
        <td th:text="${user.role}">Admin</td>
        <th><a class="btn btn-primary" th:href="@{/user/profile/{idNumber}(idNumber = ${user.idNumber})}">Edit</a></th>
        <th><a class="btn btn-danger" th:href="@{/users/{idNumber}(idNumber = ${user.idNumber})}">Delete</a></th>
      </tr>
    </tbody>
  </table>

  <script th:src="@{webjars/bootstrap/5.3.0/js/bootstrap.bundle.min.js}"></script>
</body>

</html>